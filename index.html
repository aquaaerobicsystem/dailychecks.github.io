<html>
<body>
   <h2>Log file creation for daily checks</p>
   <input type="checkbox" id="step1" name="step1" value="step 1:">
  <label for="step1">5:00am - Check SQL Jobs for Aqua18, Aqua26, Aqua55, Aqua57</label><br>
   <input type="checkbox" id="step2" name="step2" value="step 2:">
  <label for="step2">5:15am - Check Vantage linked server on Aqua26</label><br>
  <input type="checkbox" id="step3" name="step3" value="step 3:">
  <label for="step3">5:30am - Check Tasks/Logs.</label><br>
    <input type="checkbox" id="step4" name="step4" value="step 4:">
  <label for="step4">Open APD test project/design 999999/12254</label><br>
  <input type="submit" value="Submit">
   <br/>
   <button onclick = "downloadFile()"> save File </button>
<script src="https://requirejs.org/docs/release/2.1.5/comments/require.js"></script>
<script type="text/javascript">
  require.config({
    paths: {
        "jquery": "https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min"
    },
    waitSeconds: 40
  });
</script>
 <script type="text/javascript">
      const downloadFile = () => {
          const link = document.createElement("a");
         const step1 =  document.getElementById("step1").value + document.getElementById("step1").checked;
          const step2 = document.getElementById("step2").value + document.getElementById("step2").checked;
           const step3 = document.getElementById("step3").value + document.getElementById("step3").checked;
            const step4 = document.getElementById("step4").value + document.getElementById("step4").checked;

jQuery.get('morningchecks.txt', function(data) {
         //alert(data.length);
          // initialize title and body variables
        if (data.length > 3){
        var notifs = data;
           const content = new Date().toLocaleString() + ": " + step1 + "," + step2 + "," + step3 + "," + step4;
         const file = new Blob([notifs + '\n' + content], { type: 'text/plain' });
         link.href = URL.createObjectURL(file);
         const now = new Date();
const offsetMs = now.getTimezoneOffset() * 60 * 1000;
const dateLocal = new Date(now.getTime() - offsetMs);
const str = dateLocal.toISOString().slice(0, 19).replace(/-/g, "").replace("T", "").replace(":", "").replace(":", "").slice(0, -2);

         link.download = "morningchecks.txt";
      
         link.click();
         URL.revokeObjectURL(link.href);
}
});

         
         
         
      };
   </script>
</body>
</html>
